{% extends "base.html" %}

{% block content %}
    {{ super() }}
    <div class="container-fluid">
        <div class="col-lg-12">
            <h2>Meta-data tree</h2>
            <div id="tree"></div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    {{ super() }}
    <script type="text/javascript">
        function getTree() {
            // Some logic to retrieve, or generate tree structure
            var data = {{ hyperstream.plate_manager.meta_data_manager.global_plate_definitions.to_dict(with_data=True) | treelib_to_treeview | tojson | safe }};
            // debugger;
            return data;
    }

    $('#tree').treeview({
            data: getTree(),
            enableLinks: true
        });
    </script>
{% endblock %}