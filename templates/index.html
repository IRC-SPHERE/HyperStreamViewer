{% extends "base.html" %}

{% block content %}
    {{ super() }}
    <div class="container-fluid">
        <div class="jumbotron alert alert-danger">
            <h1>DEVELOPMENT VERSION</h1>
            <h2>HyperStream Data Viewer and Visualisation Dashboard</h2>
            <p>Issue tracker on <a href="https://github.com/IRC-SPHERE/HyperStreamViewer/issues">GitHub</a></p>
       </div>
    </div>
    <div class="container-fluid">
        <div class="col-lg-12">
{#            {% set d = hyperstream.plate_manager.meta_data_manager.global_plate_definitions.to_dict(with_data=True) %}#}
{#            {% for k in d recursive %}#}
{#                <li>{{ k }}#}
{#                    <ul>{{ loop(d[k]) }}</ul>#}
{#                </li>#}
{#            {% endfor %}#}
            <div id="tree"></div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    {{ super() }}
    <script type="text/javascript">
        function getTree() {
            // Some logic to retrieve, or generate tree structure
            var data = {{ hyperstream.plate_manager.meta_data_manager.global_plate_definitions.to_dict(with_data=True) | treelib_to_treeview | tojson | safe }};
            // debugger;
            return data;
    }

    $('#tree').treeview({data: getTree()});
    </script>
{% endblock %}